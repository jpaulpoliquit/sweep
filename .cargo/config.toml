# Cargo configuration
# This file helps configure Rust for Windows builds

# Increase stack size to 8MB for test executables to prevent stack overflow
# Windows default is ~1MB which is too small for deep directory traversal
# Increased to 8MB to handle very deep directory structures during tests

[target.x86_64-pc-windows-msvc]
# If you have Visual Studio Build Tools, uncomment and set the path to link.exe
# linker = "C:\\Program Files\\Microsoft Visual Studio\\2022\\BuildTools\\VC\\Tools\\MSVC\\<version>\\bin\\Hostx64\\x64\\link.exe"
# MSVC linker flag for stack size (8MB = 8388608 bytes)
rustflags = ["-C", "link-arg=/STACK:8388608"]

[target.x86_64-pc-windows-gnu]
# GNU/MinGW linker flag for stack size (8MB)
rustflags = ["-C", "link-arg=-Wl,--stack,8388608"]

[target.i686-pc-windows-msvc]
# 32-bit MSVC linker flag for stack size (8MB)
rustflags = ["-C", "link-arg=/STACK:8388608"]

[target.i686-pc-windows-gnu]
# 32-bit GNU/MinGW linker flag for stack size (8MB)
rustflags = ["-C", "link-arg=-Wl,--stack,8388608"]
